/**!
 * Sortable
 * @author  RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t():"undefined"!=typeof Package?Sortable=t():window.Sortable=t()}(function(){"use strict";function t(t,e){this.el=t,this.options=e=e||{};var o={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",ignore:"a, img",filter:null,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1};for(var i in o)!(i in e)&&(e[i]=o[i]);var a=e.group;a&&"object"==typeof a||(a=e.group={name:a}),["pull","put"].forEach(function(t){t in a||(a[t]=!0)}),U.forEach(function(o){e[o]=n(this,e[o]||W),r(t,o.substr(2).toLowerCase(),e[o])},this),e.groups=" "+a.name+(a.put.join?" "+a.put.join(" "):"")+" ",t[I]=e;for(var s in this)"_"===s.charAt(0)&&(this[s]=n(this,this[s]));r(t,"mousedown",this._onTapStart),r(t,"touchstart",this._onTapStart),r(t,"dragover",this),r(t,"dragenter",this),P.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function e(t){b&&b.state!==t&&(l(b,"display",t?"none":""),!t&&b.state&&_.insertBefore(b,v),b.state=t)}function n(t,e){var n=H.call(arguments,2);return e.bind?e.bind.apply(e,[t].concat(n)):function(){return e.apply(t,n.concat(H.call(arguments)))}}function o(t,e,n){if(t){n=n||Y,e=e.split(".");var o=e.shift().toUpperCase(),i=new RegExp("\\s("+e.join("|")+")\\s","g");do if(">*"===o&&t.parentNode===n||(""===o||t.nodeName.toUpperCase()==o)&&(!e.length||((" "+t.className+" ").match(i)||[]).length==e.length))return t;while(t!==n&&(t=t.parentNode))}return null}function i(t){t.dataTransfer.dropEffect="move",t.preventDefault()}function r(t,e,n){t.addEventListener(e,n,!1)}function a(t,e,n){t.removeEventListener(e,n,!1)}function s(t,e,n){if(t)if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(/\s+/g," ").replace(" "+e+" ","");t.className=o+(n?" "+e:"")}}function l(t,e,n){var o=t&&t.style;if(o){if(void 0===n)return Y.defaultView&&Y.defaultView.getComputedStyle?n=Y.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in o||(e="-webkit-"+e),o[e]=n+("string"==typeof n?"":"px")}}function d(t,e,n){if(t){var o=t.getElementsByTagName(e),i=0,r=o.length;if(n)for(;r>i;i++)n(o[i],i);return o}return[]}function c(t){t.draggable=!1}function h(){L=!1}function u(t,e){var n=t.lastElementChild,o=n.getBoundingClientRect();return e.clientY-(o.top+o.height)>5&&n}function f(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}function p(t){for(var e=0;t&&(t=t.previousElementSibling);)"TEMPLATE"!==t.nodeName.toUpperCase()&&e++;return e}function g(t,e){var n,o;return function(){void 0===n&&(n=arguments,o=this,setTimeout(function(){1===n.length?t.call(o,n[0]):t.apply(o,n),n=void 0},e))}}var v,m,b,_,y,D,w,S,E,C,T,x,N={},B,A,I="Sortable"+(new Date).getTime(),R=window,Y=R.document,O=R.parseInt,X=!!("draggable"in Y.createElement("div")),L=!1,M=function(t,e,n,o,i,r){var a=Y.createEvent("Event");a.initEvent(e,!0,!0),a.item=n||t,a.from=o||t,a.clone=b,a.oldIndex=i,a.newIndex=r,t.dispatchEvent(a)},U="onAdd onUpdate onRemove onStart onEnd onFilter onSort".split(" "),W=function(){},k=Math.abs,H=[].slice,P=[],j=g(function(t,e,n){if(n&&e.scroll){var o,i,r=e.scrollSensitivity,a=e.scrollSpeed,s=t.clientX,l=t.clientY,d=window.innerWidth,c=window.innerHeight,h,u;if(w!==n&&(D=e.scroll,w=n,D===!0)){D=n;do if(D.offsetWidth<D.scrollWidth||D.offsetHeight<D.scrollHeight)break;while(D=D.parentNode)}D&&(o=D,i=D.getBoundingClientRect(),h=(k(i.right-s)<=r)-(k(i.left-s)<=r),u=(k(i.bottom-l)<=r)-(k(i.top-l)<=r)),h||u||(h=(r>=d-s)-(r>=s),u=(r>=c-l)-(r>=l),(h||u)&&(o=R)),(N.vx!==h||N.vy!==u||N.el!==o)&&(N.el=o,N.vx=h,N.vy=u,clearInterval(N.pid),o&&(N.pid=setInterval(function(){o===R?R.scrollTo(R.scrollX+h*a,R.scrollY+u*a):(u&&(o.scrollTop+=u*a),h&&(o.scrollLeft+=h*a))},24)))}},30);return t.prototype={constructor:t,_dragStarted:function(){_&&v&&(s(v,this.options.ghostClass,!0),t.active=this,M(_,"start",v,_,C))},_onTapStart:function(t){var e=t.type,n=t.touches&&t.touches[0],i=(n||t).target,a=i,s=this.options,l=this.el,h=s.filter;if(!("mousedown"===e&&0!==t.button||s.disabled)&&(i=o(i,s.draggable,l))){if(C=p(i),"function"==typeof h){if(h.call(this,t,i,this))return M(a,"filter",i,l,C),void t.preventDefault()}else if(h&&(h=h.split(",").some(function(t){return t=o(a,t.trim(),l),t?(M(t,"filter",i,l,C),!0):void 0})))return void t.preventDefault();if((!s.handle||o(a,s.handle,l))&&i&&!v&&i.parentNode===l){B=t,_=this.el,v=i,y=v.nextSibling,x=this.options.group,v.draggable=!0,s.ignore.split(",").forEach(function(t){d(i,t.trim(),c)}),n&&(B={target:i,clientX:n.clientX,clientY:n.clientY},this._onDragStart(B,"touch"),t.preventDefault()),r(Y,"mouseup",this._onDrop),r(Y,"touchend",this._onDrop),r(Y,"touchcancel",this._onDrop),r(v,"dragend",this),r(_,"dragstart",this._onDragStart),X||this._onDragStart(B,!0);try{Y.selection?Y.selection.empty():window.getSelection().removeAllRanges()}catch(u){}}}},_emulateDragOver:function(){if(A){l(m,"display","none");var t=Y.elementFromPoint(A.clientX,A.clientY),e=t,n=" "+this.options.group.name,o=P.length;if(e)do{if(e[I]&&e[I].groups.indexOf(n)>-1){for(;o--;)P[o]({clientX:A.clientX,clientY:A.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);l(m,"display","")}},_onTouchMove:function(t){if(B){var e=t.touches?t.touches[0]:t,n=e.clientX-B.clientX,o=e.clientY-B.clientY,i=t.touches?"translate3d("+n+"px,"+o+"px,0)":"translate("+n+"px,"+o+"px)";A=e,l(m,"webkitTransform",i),l(m,"mozTransform",i),l(m,"msTransform",i),l(m,"transform",i),t.preventDefault()}},_onDragStart:function(t,e){var n=t.dataTransfer,o=this.options;if(this._offUpEvents(),"clone"==x.pull&&(b=v.cloneNode(!0),l(b,"display","none"),_.insertBefore(b,v)),e){var i=v.getBoundingClientRect(),a=l(v),s;m=v.cloneNode(!0),l(m,"top",i.top-O(a.marginTop,10)),l(m,"left",i.left-O(a.marginLeft,10)),l(m,"width",i.width),l(m,"height",i.height),l(m,"opacity","1"),l(m,"position","fixed"),l(m,"zIndex","100000"),_.appendChild(m),s=m.getBoundingClientRect(),l(m,"width",2*i.width-s.width),l(m,"height",2*i.height-s.height),"touch"===e?(r(Y,"touchmove",this._onTouchMove),r(Y,"touchend",this._onDrop),r(Y,"touchcancel",this._onDrop)):(r(Y,"mousemove",this._onTouchMove),r(Y,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,150)}else n&&(n.effectAllowed="move",o.setData&&o.setData.call(this,n,v)),r(Y,"drop",this);setTimeout(this._dragStarted,0)},_onDragOver:function(t){var n=this.el,i,r,a,s=this.options,d=s.group,c=d.put,f=x===d,p=s.sort;if(v&&(void 0!==t.preventDefault&&(t.preventDefault(),!s.dragoverBubble&&t.stopPropagation()),x&&!s.disabled&&(f?p||(a=!_.contains(v)):x.pull&&c&&(x.name===d.name||c.indexOf&&~c.indexOf(x.name)))&&(void 0===t.rootEl||t.rootEl===this.el))){if(j(t,s,this.el),L)return;if(i=o(t.target,s.draggable,n),r=v.getBoundingClientRect(),a)return e(!0),void(b||y?_.insertBefore(v,b||y):p||_.appendChild(v));if(0===n.children.length||n.children[0]===m||n===t.target&&(i=u(n,t))){if(i){if(i.animated)return;g=i.getBoundingClientRect()}e(f),n.appendChild(v),this._animate(r,v),i&&this._animate(g,i)}else if(i&&!i.animated&&i!==v&&void 0!==i.parentNode[I]){S!==i&&(S=i,E=l(i));var g=i.getBoundingClientRect(),D=g.right-g.left,w=g.bottom-g.top,C=/left|right|inline/.test(E.cssFloat+E.display),T=i.offsetWidth>v.offsetWidth,N=i.offsetHeight>v.offsetHeight,B=(C?(t.clientX-g.left)/D:(t.clientY-g.top)/w)>.5,A=i.nextElementSibling,R;L=!0,setTimeout(h,30),e(f),R=C?i.previousElementSibling===v&&!T||B&&T:A!==v&&!N||B&&N,R&&!A?n.appendChild(v):i.parentNode.insertBefore(v,R?A:i),this._animate(r,v),this._animate(g,i),sentence.animate()}}},_animate:function(t,e){var n=this.options.animation;if(n){var o=e.getBoundingClientRect();l(e,"transition","none"),l(e,"transform","translate3d("+(t.left-o.left)+"px,"+(t.top-o.top)+"px,0)"),e.offsetWidth,l(e,"transition","all "+n+"ms"),l(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){l(e,"transition",""),l(e,"transform",""),e.animated=!1},n)}},_offUpEvents:function(){a(Y,"mouseup",this._onDrop),a(Y,"touchmove",this._onTouchMove),a(Y,"touchend",this._onDrop),a(Y,"touchcancel",this._onDrop)},_onDrop:function(e){var n=this.el,o=this.options;clearInterval(this._loopId),clearInterval(N.pid),a(Y,"drop",this),a(Y,"mousemove",this._onTouchMove),a(n,"dragstart",this._onDragStart),this._offUpEvents(),e&&(e.preventDefault(),!o.dropBubble&&e.stopPropagation(),m&&m.parentNode.removeChild(m),v&&(a(v,"dragend",this),c(v),s(v,this.options.ghostClass,!1),_!==v.parentNode?(T=p(v),M(v.parentNode,"sort",v,_,C,T),M(_,"sort",v,_,C,T),M(v,"add",v,_,C,T),M(_,"remove",v,_,C,T)):(b&&b.parentNode.removeChild(b),v.nextSibling!==y&&(T=p(v),M(_,"update",v,_,C,T),M(_,"sort",v,_,C,T))),t.active&&M(_,"end",v,_,C,T)),_=v=m=y=b=D=w=B=A=S=E=x=t.active=null,this.save())},handleEvent:function(t){var e=t.type;"dragover"===e||"dragenter"===e?(this._onDragOver(t),i(t)):("drop"===e||"dragend"===e)&&this._onDrop(t)},toArray:function(){for(var t=[],e,n=this.el.children,i=0,r=n.length;r>i;i++)e=n[i],o(e,this.options.draggable,this.el)&&t.push(e.getAttribute("data-id")||f(e));return t},sort:function(t){var e={},n=this.el;this.toArray().forEach(function(t,i){var r=n.children[i];o(r,this.options.draggable,n)&&(e[t]=r)},this),t.forEach(function(t){e[t]&&(n.removeChild(e[t]),n.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return o(t,e||this.options.draggable,this.el)},option:function(t,e){var n=this.options;return void 0===e?n[t]:void(n[t]=e)},destroy:function(){var t=this.el,e=this.options;U.forEach(function(n){a(t,n.substr(2).toLowerCase(),e[n])}),a(t,"mousedown",this._onTapStart),a(t,"touchstart",this._onTapStart),a(t,"dragover",this),a(t,"dragenter",this),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),P.splice(P.indexOf(this._onDragOver),1),this._onDrop(),this.el=null}},t.utils={on:r,off:a,css:l,find:d,bind:n,is:function(t,e){return!!o(t,e,t)},throttle:g,closest:o,toggleClass:s,dispatchEvent:M,index:p},t.version="1.1.1",t.create=function(e,n){return new t(e,n)},t});